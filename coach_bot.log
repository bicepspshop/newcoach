2025-05-27 19:17:38,532 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-27 19:17:38,615 - __main__ - ERROR - ❌ Database connection failed: [Errno 11001] getaddrinfo failed
2025-05-27 19:17:38,615 - __main__ - ERROR - 💥 Critical error: [Errno 11001] getaddrinfo failed
2025-05-27 19:17:38,616 - __main__ - INFO - 🔄 Shutting down bot...
2025-05-27 19:17:38,616 - __main__ - INFO - ✅ Database disconnected
2025-05-27 19:17:38,616 - __main__ - INFO - ✅ Bot shutdown complete
2025-05-27 19:17:38,617 - __main__ - ERROR - 💥 Unexpected error: [Errno 11001] getaddrinfo failed
2025-05-27 21:26:48,081 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-27 21:26:49,050 - __main__ - INFO - ✅ Database connected
2025-05-27 21:26:49,255 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-27 21:26:49,255 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-27 21:26:49,389 - __main__ - INFO - ✅ Bot commands set
2025-05-27 21:26:49,389 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-27 21:26:49,390 - aiogram.dispatcher - INFO - Start polling
2025-05-27 21:26:49,453 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-27 21:26:50,374 - bot.handlers - INFO - New coach registered: aNm0ff (ID: 2)
2025-05-27 21:26:50,703 - aiogram.event - INFO - Update id=305421602 is handled. Duration 1172 ms by bot id=7503397913
2025-05-27 21:27:35,001 - aiogram.event - INFO - Update id=305421603 is not handled. Duration 14 ms by bot id=7503397913
2025-05-27 21:27:39,668 - bot.handlers - INFO - New coach registered: VK (ID: 3)
2025-05-27 21:27:40,027 - aiogram.event - INFO - Update id=305421604 is handled. Duration 936 ms by bot id=7503397913
2025-05-27 21:37:35,132 - aiogram.dispatcher - INFO - Polling stopped
2025-05-27 21:37:35,391 - __main__ - INFO - 🔄 Shutting down bot...
2025-05-27 21:37:35,392 - __main__ - INFO - ✅ Database disconnected
2025-05-27 21:37:35,392 - __main__ - INFO - ✅ Bot shutdown complete
2025-05-27 21:37:35,392 - aiogram.dispatcher - INFO - Polling stopped for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-27 21:37:35,393 - __main__ - INFO - 👋 Bot stopped by user
2025-05-27 21:37:44,027 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-27 21:37:44,954 - __main__ - INFO - ✅ Database connected
2025-05-27 21:37:45,167 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-27 21:37:45,167 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-27 21:37:45,239 - __main__ - INFO - ✅ Bot commands set
2025-05-27 21:37:45,239 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-27 21:37:45,240 - aiogram.dispatcher - INFO - Start polling
2025-05-27 21:37:45,295 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-27 21:38:01,447 - aiogram.event - INFO - Update id=305421605 is handled. Duration 702 ms by bot id=7503397913
2025-05-27 22:01:08,715 - aiogram.dispatcher - INFO - Polling stopped
2025-05-27 22:01:08,967 - __main__ - INFO - 🔄 Shutting down bot...
2025-05-27 22:01:08,967 - __main__ - INFO - ✅ Database disconnected
2025-05-27 22:01:08,967 - __main__ - INFO - ✅ Bot shutdown complete
2025-05-27 22:01:08,968 - aiogram.dispatcher - INFO - Polling stopped for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-27 22:01:08,969 - __main__ - INFO - 👋 Bot stopped by user
2025-05-27 22:01:19,883 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-27 22:01:20,883 - __main__ - INFO - ✅ Database connected
2025-05-27 22:01:21,133 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-27 22:01:21,133 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-27 22:01:21,198 - __main__ - INFO - ✅ Bot commands set
2025-05-27 22:01:21,198 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-27 22:01:21,199 - aiogram.dispatcher - INFO - Start polling
2025-05-27 22:01:21,268 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-27 22:01:32,712 - aiogram.event - INFO - Update id=305421606 is handled. Duration 625 ms by bot id=7503397913
2025-05-27 22:02:19,628 - aiogram.event - INFO - Update id=305421607 is handled. Duration 2030 ms by bot id=7503397913
2025-05-27 22:04:14,070 - aiogram.event - INFO - Update id=305421608 is handled. Duration 1983 ms by bot id=7503397913
2025-05-27 22:04:33,781 - aiogram.event - INFO - Update id=305421609 is handled. Duration 500 ms by bot id=7503397913
2025-05-27 22:04:51,638 - aiogram.dispatcher - INFO - Polling stopped
2025-05-27 22:04:51,889 - __main__ - INFO - 🔄 Shutting down bot...
2025-05-27 22:04:52,030 - __main__ - INFO - ✅ Database disconnected
2025-05-27 22:04:52,031 - __main__ - INFO - ✅ Bot shutdown complete
2025-05-27 22:04:52,032 - aiogram.dispatcher - INFO - Polling stopped for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-27 22:04:52,033 - __main__ - INFO - 👋 Bot stopped by user
2025-05-27 22:04:58,606 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-27 22:04:59,533 - __main__ - INFO - ✅ Database connected
2025-05-27 22:04:59,768 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-27 22:04:59,769 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-27 22:04:59,834 - __main__ - INFO - ✅ Bot commands set
2025-05-27 22:04:59,834 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-27 22:04:59,835 - aiogram.dispatcher - INFO - Start polling
2025-05-27 22:04:59,890 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-27 22:05:04,484 - aiogram.event - INFO - Update id=305421610 is not handled. Duration 422 ms by bot id=7503397913
2025-05-27 22:05:04,484 - aiogram.event - ERROR - Cause exception while process update id=305421610 by bot id=7503397913
DuplicatePreparedStatementError: prepared statement "__asyncpg_stmt_1__" already exists
HINT:  
NOTE: pgbouncer with pool_mode set to "transaction" or
"statement" does not support prepared statements properly.
You have two options:

* if you are using pgbouncer for connection pooling to a
  single server, switch to the connection pool functionality
  provided by asyncpg, it is a much better option for this
  purpose;

* if you have no option of avoiding the use of pgbouncer,
  then you can set statement_cache_size to 0 when creating
  the asyncpg connection object.
Traceback (most recent call last):
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\bot\handlers.py", line 45, in cmd_start
    coach = await db.get_coach_by_telegram_id(user_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\database\connection.py", line 62, in get_coach_by_telegram_id
    row = await self.fetch_one(query, telegram_id)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\database\connection.py", line 41, in fetch_one
    return await conn.fetchrow(query, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\asyncpg\connection.py", line 749, in fetchrow
    data = await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\asyncpg\connection.py", line 1794, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\asyncpg\connection.py", line 1892, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\asyncpg\connection.py", line 1933, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.DuplicatePreparedStatementError: prepared statement "__asyncpg_stmt_1__" already exists
HINT:  
NOTE: pgbouncer with pool_mode set to "transaction" or
"statement" does not support prepared statements properly.
You have two options:

* if you are using pgbouncer for connection pooling to a
  single server, switch to the connection pool functionality
  provided by asyncpg, it is a much better option for this
  purpose;

* if you have no option of avoiding the use of pgbouncer,
  then you can set statement_cache_size to 0 when creating
  the asyncpg connection object.

2025-05-27 22:05:15,934 - aiogram.event - INFO - Update id=305421611 is not handled. Duration 406 ms by bot id=7503397913
2025-05-27 22:05:15,934 - aiogram.event - ERROR - Cause exception while process update id=305421611 by bot id=7503397913
DuplicatePreparedStatementError: prepared statement "__asyncpg_stmt_2__" already exists
HINT:  
NOTE: pgbouncer with pool_mode set to "transaction" or
"statement" does not support prepared statements properly.
You have two options:

* if you are using pgbouncer for connection pooling to a
  single server, switch to the connection pool functionality
  provided by asyncpg, it is a much better option for this
  purpose;

* if you have no option of avoiding the use of pgbouncer,
  then you can set statement_cache_size to 0 when creating
  the asyncpg connection object.
Traceback (most recent call last):
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\bot\handlers.py", line 45, in cmd_start
    coach = await db.get_coach_by_telegram_id(user_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\database\connection.py", line 62, in get_coach_by_telegram_id
    row = await self.fetch_one(query, telegram_id)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\database\connection.py", line 41, in fetch_one
    return await conn.fetchrow(query, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\asyncpg\connection.py", line 749, in fetchrow
    data = await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\asyncpg\connection.py", line 1794, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\asyncpg\connection.py", line 1892, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\asyncpg\connection.py", line 1933, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.DuplicatePreparedStatementError: prepared statement "__asyncpg_stmt_2__" already exists
HINT:  
NOTE: pgbouncer with pool_mode set to "transaction" or
"statement" does not support prepared statements properly.
You have two options:

* if you are using pgbouncer for connection pooling to a
  single server, switch to the connection pool functionality
  provided by asyncpg, it is a much better option for this
  purpose;

* if you have no option of avoiding the use of pgbouncer,
  then you can set statement_cache_size to 0 when creating
  the asyncpg connection object.

2025-05-27 22:21:58,632 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-27 22:21:59,517 - __main__ - INFO - ✅ Database connected
2025-05-27 22:21:59,741 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-27 22:21:59,741 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-27 22:21:59,810 - __main__ - INFO - ✅ Bot commands set
2025-05-27 22:21:59,811 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-27 22:21:59,811 - aiogram.dispatcher - INFO - Start polling
2025-05-27 22:21:59,878 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-27 22:22:06,345 - aiogram.event - INFO - Update id=305421612 is handled. Duration 812 ms by bot id=7503397913
2025-05-27 22:30:32,101 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-27 22:30:33,037 - __main__ - INFO - ✅ Database connected
2025-05-27 22:30:33,258 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-27 22:30:33,258 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-27 22:30:33,351 - __main__ - INFO - ✅ Bot commands set
2025-05-27 22:30:33,351 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-27 22:30:33,351 - aiogram.dispatcher - INFO - Start polling
2025-05-27 22:30:33,406 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-27 22:32:24,123 - aiogram.event - INFO - Update id=305421613 is handled. Duration 688 ms by bot id=7503397913
2025-05-27 22:37:02,663 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-27 22:37:03,617 - __main__ - INFO - ✅ Database connected
2025-05-27 22:37:03,846 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-27 22:37:03,846 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-27 22:37:03,966 - __main__ - INFO - ✅ Bot commands set
2025-05-27 22:37:03,967 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-27 22:37:03,967 - aiogram.dispatcher - INFO - Start polling
2025-05-27 22:37:04,024 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-27 22:37:15,905 - aiogram.event - INFO - Update id=305421614 is handled. Duration 655 ms by bot id=7503397913
2025-05-27 22:39:22,612 - aiogram.event - INFO - Update id=305421615 is handled. Duration 531 ms by bot id=7503397913
2025-05-27 22:39:33,333 - aiogram.event - INFO - Update id=305421616 is handled. Duration 907 ms by bot id=7503397913
2025-05-27 22:39:33,734 - aiogram.event - INFO - Update id=305421617 is handled. Duration 140 ms by bot id=7503397913
2025-05-27 22:39:36,006 - aiogram.event - INFO - Update id=305421618 is handled. Duration 764 ms by bot id=7503397913
2025-05-27 22:39:38,001 - bot.handlers - INFO - New coach registered: ТВОЙТРЕНЕР (ID: 4)
2025-05-27 22:39:38,091 - aiogram.event - INFO - Update id=305421619 is handled. Duration 938 ms by bot id=7503397913
2025-05-27 22:59:22,910 - aiogram.dispatcher - INFO - Polling stopped
2025-05-27 22:59:23,166 - __main__ - INFO - 🔄 Shutting down bot...
2025-05-27 22:59:23,167 - __main__ - INFO - ✅ Database disconnected
2025-05-27 22:59:23,167 - __main__ - INFO - ✅ Bot shutdown complete
2025-05-27 22:59:23,168 - aiogram.dispatcher - INFO - Polling stopped for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-27 22:59:23,168 - __main__ - INFO - 👋 Bot stopped by user
2025-05-27 23:04:14,150 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-27 23:04:15,098 - __main__ - INFO - ✅ Database connected
2025-05-27 23:04:15,340 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-27 23:04:15,340 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-27 23:04:15,424 - __main__ - INFO - ✅ Bot commands set
2025-05-27 23:04:15,424 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-27 23:04:15,425 - aiogram.dispatcher - INFO - Start polling
2025-05-27 23:04:15,501 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-27 23:04:24,787 - aiogram.event - INFO - Update id=305421620 is handled. Duration 671 ms by bot id=7503397913
2025-05-27 23:05:34,443 - aiogram.dispatcher - INFO - Polling stopped
2025-05-27 23:05:34,641 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2706)
2025-05-27 23:05:34,641 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7503397913)
2025-05-27 23:05:34,694 - __main__ - INFO - 🔄 Shutting down bot...
2025-05-27 23:05:34,831 - __main__ - INFO - ✅ Database disconnected
2025-05-27 23:05:34,832 - __main__ - INFO - ✅ Bot shutdown complete
2025-05-27 23:05:34,833 - aiogram.dispatcher - INFO - Polling stopped for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-27 23:05:34,833 - __main__ - INFO - 👋 Bot stopped by user
2025-05-27 23:06:59,885 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-27 23:07:00,880 - __main__ - INFO - ✅ Database connected
2025-05-27 23:07:01,079 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-27 23:07:01,079 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-27 23:07:01,165 - __main__ - INFO - ✅ Bot commands set
2025-05-27 23:07:01,165 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-27 23:07:01,166 - aiogram.dispatcher - INFO - Start polling
2025-05-27 23:07:01,277 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-27 23:07:06,331 - aiogram.event - INFO - Update id=305421621 is not handled. Duration 468 ms by bot id=7503397913
2025-05-27 23:07:06,331 - aiogram.event - ERROR - Cause exception while process update id=305421621 by bot id=7503397913
DuplicatePreparedStatementError: prepared statement "__asyncpg_stmt_1__" already exists
HINT:  
NOTE: pgbouncer with pool_mode set to "transaction" or
"statement" does not support prepared statements properly.
You have two options:

* if you are using pgbouncer for connection pooling to a
  single server, switch to the connection pool functionality
  provided by asyncpg, it is a much better option for this
  purpose;

* if you have no option of avoiding the use of pgbouncer,
  then you can set statement_cache_size to 0 when creating
  the asyncpg connection object.
Traceback (most recent call last):
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\bot\handlers.py", line 45, in cmd_start
    coach = await db.get_coach_by_telegram_id(user_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\database\connection.py", line 62, in get_coach_by_telegram_id
    row = await self.fetch_one(query, telegram_id)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\database\connection.py", line 41, in fetch_one
    return await conn.fetchrow(query, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\asyncpg\connection.py", line 749, in fetchrow
    data = await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\asyncpg\connection.py", line 1794, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\asyncpg\connection.py", line 1892, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\asyncpg\connection.py", line 1933, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vladislav\source\repos\coachapp\venv\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.DuplicatePreparedStatementError: prepared statement "__asyncpg_stmt_1__" already exists
HINT:  
NOTE: pgbouncer with pool_mode set to "transaction" or
"statement" does not support prepared statements properly.
You have two options:

* if you are using pgbouncer for connection pooling to a
  single server, switch to the connection pool functionality
  provided by asyncpg, it is a much better option for this
  purpose;

* if you have no option of avoiding the use of pgbouncer,
  then you can set statement_cache_size to 0 when creating
  the asyncpg connection object.

2025-05-27 23:07:31,413 - aiogram.event - INFO - Update id=305421622 is handled. Duration 671 ms by bot id=7503397913
2025-05-27 23:11:04,537 - aiogram.event - INFO - Update id=305421623 is handled. Duration 577 ms by bot id=7503397913
2025-05-27 23:22:32,408 - aiogram.event - INFO - Update id=305421624 is handled. Duration 3500 ms by bot id=7503397913
2025-05-27 23:22:33,623 - aiogram.event - INFO - Update id=305421626 is handled. Duration 1922 ms by bot id=7503397913
2025-05-27 23:22:33,975 - aiogram.event - INFO - Update id=305421625 is handled. Duration 3233 ms by bot id=7503397913
2025-05-27 23:22:35,824 - aiogram.event - INFO - Update id=305421627 is handled. Duration 608 ms by bot id=7503397913
2025-05-28 00:01:59,277 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-28 00:02:00,240 - __main__ - INFO - ✅ Database connected
2025-05-28 00:02:00,461 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-28 00:02:00,462 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-28 00:02:00,540 - __main__ - INFO - ✅ Bot commands set
2025-05-28 00:02:00,540 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-28 00:02:00,541 - aiogram.dispatcher - INFO - Start polling
2025-05-28 00:02:00,599 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-28 00:04:38,192 - aiogram.event - INFO - Update id=305421628 is handled. Duration 641 ms by bot id=7503397913
2025-05-28 01:42:06,100 - aiogram.event - INFO - Update id=305421629 is handled. Duration 1703 ms by bot id=7503397913
2025-05-28 07:26:34,027 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-28 07:26:35,016 - __main__ - INFO - ✅ Database connected
2025-05-28 07:26:35,265 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-28 07:26:35,265 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-28 07:26:35,340 - __main__ - INFO - ✅ Bot commands set
2025-05-28 07:26:35,341 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-28 07:26:35,341 - aiogram.dispatcher - INFO - Start polling
2025-05-28 07:26:35,408 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-28 07:26:36,132 - aiogram.event - INFO - Update id=305421630 is handled. Duration 655 ms by bot id=7503397913
2025-05-28 07:30:35,343 - aiogram.dispatcher - INFO - Polling stopped
2025-05-28 07:30:35,600 - __main__ - INFO - 🔄 Shutting down bot...
2025-05-28 07:30:35,750 - __main__ - INFO - ✅ Database disconnected
2025-05-28 07:30:35,751 - __main__ - INFO - ✅ Bot shutdown complete
2025-05-28 07:30:35,751 - aiogram.dispatcher - INFO - Polling stopped for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-28 07:30:35,752 - __main__ - INFO - 👋 Bot stopped by user
2025-05-28 07:30:55,159 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-28 07:30:56,078 - __main__ - INFO - ✅ Database connected
2025-05-28 07:30:56,251 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-28 07:30:56,251 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-28 07:30:56,400 - __main__ - INFO - ✅ Bot commands set
2025-05-28 07:30:56,400 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-28 07:30:56,401 - aiogram.dispatcher - INFO - Start polling
2025-05-28 07:30:56,458 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-28 07:36:10,619 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-28 07:36:11,576 - __main__ - INFO - ✅ Database connected
2025-05-28 07:36:11,832 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-28 07:36:11,833 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-28 07:36:11,911 - __main__ - INFO - ✅ Bot commands set
2025-05-28 07:36:11,911 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-28 07:36:11,912 - aiogram.dispatcher - INFO - Start polling
2025-05-28 07:36:11,977 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-28 07:36:21,830 - aiogram.event - INFO - Update id=305421631 is handled. Duration 704 ms by bot id=7503397913
2025-05-28 08:07:42,154 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-28 08:07:43,124 - __main__ - INFO - ✅ Database connected
2025-05-28 08:07:43,433 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-28 08:07:43,434 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-28 08:07:43,501 - __main__ - INFO - ✅ Bot commands set
2025-05-28 08:07:43,501 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-28 08:07:43,502 - aiogram.dispatcher - INFO - Start polling
2025-05-28 08:07:43,555 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-28 08:07:58,639 - aiogram.event - INFO - Update id=305421632 is handled. Duration 655 ms by bot id=7503397913
2025-05-28 08:19:42,239 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-28 08:19:43,319 - __main__ - INFO - ✅ Database connected
2025-05-28 08:19:43,531 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-28 08:19:43,531 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-28 08:19:43,621 - __main__ - INFO - ✅ Bot commands set
2025-05-28 08:19:43,621 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-28 08:19:43,622 - aiogram.dispatcher - INFO - Start polling
2025-05-28 08:19:43,709 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-28 08:20:20,535 - aiogram.event - INFO - Update id=305421633 is handled. Duration 702 ms by bot id=7503397913
2025-05-28 08:43:49,634 - bot.handlers - INFO - New coach registered: schaz (ID: 5)
2025-05-28 08:43:50,051 - aiogram.event - INFO - Update id=305421634 is handled. Duration 2436 ms by bot id=7503397913
2025-05-28 09:47:55,613 - aiogram.event - INFO - Update id=305421635 is handled. Duration 1750 ms by bot id=7503397913
2025-05-28 18:20:41,364 - aiogram.event - INFO - Update id=305421636 is handled. Duration 1906 ms by bot id=7503397913
2025-05-28 21:54:31,543 - aiogram.event - INFO - Update id=305421637 is handled. Duration 1812 ms by bot id=7503397913
2025-05-29 00:13:36,509 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-29 00:13:37,895 - __main__ - INFO - ✅ Database connected
2025-05-29 00:13:38,128 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-29 00:13:38,128 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-29 00:13:38,280 - __main__ - INFO - ✅ Bot commands set
2025-05-29 00:13:38,280 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-29 00:13:38,281 - aiogram.dispatcher - INFO - Start polling
2025-05-29 00:13:38,338 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 00:13:39,166 - aiogram.event - INFO - Update id=305421638 is handled. Duration 672 ms by bot id=7503397913
2025-05-29 00:13:52,397 - aiogram.dispatcher - INFO - Polling stopped
2025-05-29 00:13:52,650 - __main__ - INFO - 🔄 Shutting down bot...
2025-05-29 00:13:52,793 - __main__ - INFO - ✅ Database disconnected
2025-05-29 00:13:52,793 - __main__ - INFO - ✅ Bot shutdown complete
2025-05-29 00:13:52,793 - aiogram.dispatcher - INFO - Polling stopped for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 00:13:52,793 - __main__ - INFO - 👋 Bot stopped by user
2025-05-29 00:14:16,162 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-29 00:14:17,155 - __main__ - INFO - ✅ Database connected
2025-05-29 00:14:17,360 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-29 00:14:17,360 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-29 00:14:17,647 - __main__ - INFO - ✅ Bot commands set
2025-05-29 00:14:17,648 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-29 00:14:17,648 - aiogram.dispatcher - INFO - Start polling
2025-05-29 00:14:17,705 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 00:15:03,565 - aiogram.dispatcher - INFO - Polling stopped
2025-05-29 00:15:03,826 - __main__ - INFO - 🔄 Shutting down bot...
2025-05-29 00:15:03,958 - __main__ - INFO - ✅ Database disconnected
2025-05-29 00:15:03,958 - __main__ - INFO - ✅ Bot shutdown complete
2025-05-29 00:15:03,958 - aiogram.dispatcher - INFO - Polling stopped for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 00:15:03,959 - __main__ - INFO - 👋 Bot stopped by user
2025-05-29 00:28:32,984 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-29 00:28:34,087 - __main__ - INFO - ✅ Database connected
2025-05-29 00:28:34,289 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-29 00:28:34,290 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-29 00:28:34,442 - __main__ - INFO - ✅ Bot commands set
2025-05-29 00:28:34,442 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-29 00:28:34,442 - aiogram.dispatcher - INFO - Start polling
2025-05-29 00:28:34,492 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 00:28:40,265 - aiogram.event - INFO - Update id=305421639 is handled. Duration 618 ms by bot id=7503397913
2025-05-29 00:32:14,767 - aiogram.dispatcher - INFO - Polling stopped
2025-05-29 00:32:15,018 - __main__ - INFO - 🔄 Shutting down bot...
2025-05-29 00:32:15,164 - __main__ - INFO - ✅ Database disconnected
2025-05-29 00:32:15,164 - __main__ - INFO - ✅ Bot shutdown complete
2025-05-29 00:32:15,165 - aiogram.dispatcher - INFO - Polling stopped for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 00:32:15,165 - __main__ - INFO - 👋 Bot stopped by user
2025-05-29 00:36:44,931 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-29 00:36:46,077 - __main__ - INFO - ✅ Database connected
2025-05-29 00:36:46,278 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-29 00:36:46,278 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-29 00:36:46,429 - __main__ - INFO - ✅ Bot commands set
2025-05-29 00:36:46,429 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-29 00:36:46,429 - aiogram.dispatcher - INFO - Start polling
2025-05-29 00:36:46,478 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 00:36:56,150 - aiogram.event - INFO - Update id=305421640 is handled. Duration 611 ms by bot id=7503397913
2025-05-29 00:37:33,062 - aiogram.dispatcher - INFO - Polling stopped
2025-05-29 00:37:33,320 - __main__ - INFO - 🔄 Shutting down bot...
2025-05-29 00:37:33,465 - __main__ - INFO - ✅ Database disconnected
2025-05-29 00:37:33,465 - __main__ - INFO - ✅ Bot shutdown complete
2025-05-29 00:37:33,465 - aiogram.dispatcher - INFO - Polling stopped for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 00:37:33,466 - __main__ - INFO - 👋 Bot stopped by user
2025-05-29 00:38:55,240 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-29 00:38:56,218 - __main__ - INFO - ✅ Database connected
2025-05-29 00:38:56,424 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-29 00:38:56,425 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-29 00:38:56,569 - __main__ - INFO - ✅ Bot commands set
2025-05-29 00:38:56,569 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-29 00:38:56,569 - aiogram.dispatcher - INFO - Start polling
2025-05-29 00:38:56,618 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 00:39:04,979 - aiogram.event - INFO - Update id=305421641 is not handled. Duration 397 ms by bot id=7503397913
2025-05-29 00:39:04,979 - aiogram.event - ERROR - Cause exception while process update id=305421641 by bot id=7503397913
DuplicatePreparedStatementError: prepared statement "__asyncpg_stmt_1__" already exists
HINT:  
NOTE: pgbouncer with pool_mode set to "transaction" or
"statement" does not support prepared statements properly.
You have two options:

* if you are using pgbouncer for connection pooling to a
  single server, switch to the connection pool functionality
  provided by asyncpg, it is a much better option for this
  purpose;

* if you have no option of avoiding the use of pgbouncer,
  then you can set statement_cache_size to 0 when creating
  the asyncpg connection object.
Traceback (most recent call last):
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\fonsh\Downloads\coachapp\bot\handlers.py", line 45, in cmd_start
    coach = await db.get_coach_by_telegram_id(user_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\fonsh\Downloads\coachapp\database\connection.py", line 62, in get_coach_by_telegram_id
    row = await self.fetch_one(query, telegram_id)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\fonsh\Downloads\coachapp\database\connection.py", line 41, in fetch_one
    return await conn.fetchrow(query, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\asyncpg\connection.py", line 748, in fetchrow
    data = await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\asyncpg\connection.py", line 1864, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\asyncpg\connection.py", line 1961, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\asyncpg\connection.py", line 2012, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\fonsh\AppData\Local\Programs\Python\Python313\Lib\site-packages\asyncpg\connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "asyncpg\\protocol\\protocol.pyx", line 165, in prepare
asyncpg.exceptions.DuplicatePreparedStatementError: prepared statement "__asyncpg_stmt_1__" already exists
HINT:  
NOTE: pgbouncer with pool_mode set to "transaction" or
"statement" does not support prepared statements properly.
You have two options:

* if you are using pgbouncer for connection pooling to a
  single server, switch to the connection pool functionality
  provided by asyncpg, it is a much better option for this
  purpose;

* if you have no option of avoiding the use of pgbouncer,
  then you can set statement_cache_size to 0 when creating
  the asyncpg connection object.

2025-05-29 00:40:38,227 - aiogram.dispatcher - INFO - Polling stopped
2025-05-29 00:40:38,481 - __main__ - INFO - 🔄 Shutting down bot...
2025-05-29 00:40:38,611 - __main__ - INFO - ✅ Database disconnected
2025-05-29 00:40:38,612 - __main__ - INFO - ✅ Bot shutdown complete
2025-05-29 00:40:38,612 - aiogram.dispatcher - INFO - Polling stopped for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 00:40:38,613 - __main__ - INFO - 👋 Bot stopped by user
2025-05-29 00:40:41,836 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-29 00:40:42,821 - __main__ - INFO - ✅ Database connected
2025-05-29 00:40:43,026 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-29 00:40:43,026 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-29 00:40:43,260 - __main__ - INFO - ✅ Bot commands set
2025-05-29 00:40:43,261 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-29 00:40:43,261 - aiogram.dispatcher - INFO - Start polling
2025-05-29 00:40:43,310 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 00:40:46,538 - aiogram.event - INFO - Update id=305421642 is handled. Duration 796 ms by bot id=7503397913
2025-05-29 00:41:23,074 - aiogram.dispatcher - INFO - Polling stopped
2025-05-29 00:41:23,339 - __main__ - INFO - 🔄 Shutting down bot...
2025-05-29 00:41:23,472 - __main__ - INFO - ✅ Database disconnected
2025-05-29 00:41:23,473 - __main__ - INFO - ✅ Bot shutdown complete
2025-05-29 00:41:23,473 - aiogram.dispatcher - INFO - Polling stopped for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 00:41:23,473 - __main__ - INFO - 👋 Bot stopped by user
2025-05-29 00:52:34,693 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-29 00:52:35,667 - __main__ - INFO - ✅ Database connected
2025-05-29 00:52:35,870 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-29 00:52:35,870 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-29 00:52:36,024 - __main__ - INFO - ✅ Bot commands set
2025-05-29 00:52:36,025 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-29 00:52:36,025 - aiogram.dispatcher - INFO - Start polling
2025-05-29 00:52:36,075 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 00:52:39,698 - aiogram.event - INFO - Update id=305421643 is handled. Duration 818 ms by bot id=7503397913
2025-05-29 01:01:48,713 - aiogram.dispatcher - INFO - Polling stopped
2025-05-29 01:01:48,978 - __main__ - INFO - 🔄 Shutting down bot...
2025-05-29 01:01:48,978 - __main__ - INFO - ✅ Database disconnected
2025-05-29 01:01:48,978 - __main__ - INFO - ✅ Bot shutdown complete
2025-05-29 01:01:48,978 - aiogram.dispatcher - INFO - Polling stopped for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 01:01:48,979 - __main__ - INFO - 👋 Bot stopped by user
2025-05-29 01:14:29,211 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-29 01:14:30,200 - __main__ - INFO - ✅ Database connected
2025-05-29 01:14:30,387 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-29 01:14:30,387 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-29 01:14:30,539 - __main__ - INFO - ✅ Bot commands set
2025-05-29 01:14:30,539 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-29 01:14:30,539 - aiogram.dispatcher - INFO - Start polling
2025-05-29 01:14:30,585 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 01:14:34,524 - aiogram.event - INFO - Update id=305421644 is handled. Duration 749 ms by bot id=7503397913
2025-05-29 01:27:05,112 - aiogram.dispatcher - INFO - Polling stopped
2025-05-29 01:27:05,369 - __main__ - INFO - 🔄 Shutting down bot...
2025-05-29 01:27:05,369 - __main__ - INFO - ✅ Database disconnected
2025-05-29 01:27:05,369 - __main__ - INFO - ✅ Bot shutdown complete
2025-05-29 01:27:05,370 - aiogram.dispatcher - INFO - Polling stopped for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 01:27:05,370 - __main__ - INFO - 👋 Bot stopped by user
2025-05-29 01:29:45,997 - __main__ - INFO - 🚀 Starting Coach Assistant Bot...
2025-05-29 01:29:46,988 - __main__ - INFO - ✅ Database connected
2025-05-29 01:29:47,189 - __main__ - INFO - 🤖 Bot started: @couchhelperbot
2025-05-29 01:29:47,189 - __main__ - INFO - 👤 Bot name: ТВОЙТРЕНЕР
2025-05-29 01:29:47,333 - __main__ - INFO - ✅ Bot commands set
2025-05-29 01:29:47,333 - __main__ - INFO - 🏋️‍♂️ Coach Assistant Bot is ready!
2025-05-29 01:29:47,333 - aiogram.dispatcher - INFO - Start polling
2025-05-29 01:29:47,382 - aiogram.dispatcher - INFO - Run polling for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 01:36:10,902 - aiogram.dispatcher - INFO - Polling stopped
2025-05-29 01:36:11,165 - __main__ - INFO - 🔄 Shutting down bot...
2025-05-29 01:36:11,165 - __main__ - INFO - ✅ Database disconnected
2025-05-29 01:36:11,165 - __main__ - INFO - ✅ Bot shutdown complete
2025-05-29 01:36:11,166 - aiogram.dispatcher - INFO - Polling stopped for bot @couchhelperbot id=7503397913 - 'ТВОЙТРЕНЕР'
2025-05-29 01:36:11,166 - __main__ - INFO - 👋 Bot stopped by user
