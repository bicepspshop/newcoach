@echo off
echo ===============================================
echo   Безопасная очистка и обновление GitHub репозитория
echo ===============================================

:: Переход в папку проекта
cd /d "C:\Users\fonsh\Downloads\coachapp"

echo Создание новой ветки для чистого обновления...
git checkout --orphan clean-update

echo Удаление всех файлов из индекса...
git rm -rf --cached .

echo Добавление всех текущих файлов...
git add .

echo Создание первого коммита в новой ветке...
git commit -m "Чистое обновление проекта - все файлы из локальной папки"

echo Удаление старой ветки main...
git branch -D main

echo Переименование текущей ветки в main...
git branch -m main

echo Принудительная отправка на GitHub...
git push origin main --force

echo ===============================================
echo   Готово! Репозиторий полностью обновлен
echo ===============================================
pause
